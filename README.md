# Scripts para escanear todos os contratos UniswapV2 na rede Ethereum e procurar por desequilíbrios entre os saldos/reservas.

sobre UniswapV2 tem uma função interessante chamada skim (endereço) que permite que qualquer pessoa reivindique uma discrepância positiva entre o saldo real do token no contrato e o número de reserva armazenado no contrato Pair.

Esses scripts escaneiam todos os contratos uniV2 em busca dessas oportunidades. Geralmente existem apenas alguns, mas tokens com suprimentos variáveis como aTokens ou tokens de rebase como AMPL podem criar algum caos. A maioria dos saldos skim são tão pequenos que não valem o gás para chamar. Mas às vezes são lucrativos.

Se você tentar chamar skim de um EOA, espere ser frontrun. Há um número crescente de bots procurando essas oportunidades. Você pode querer usar algo como o exemplo de contrato Forwarder.sol ou até algo mais sofisticado.

instalar clonar o repositório entrar no repositório executar npm i para instalar as dependências (web3 e axios) uso existem dois scripts principais: uniMarkets.js procura por quaisquer mercados recém-deployados desde o último Pair conhecido e acrescenta logs/events.js com quaisquer novos mercados skim.js verifica cada mercado em log/events.js e procura por oportunidades de skim. Ele tenta usar a API do coingecko para encontrar um preço para o valor dos tokens skim-able a partir do diretório raiz do repositório npm run update irá executar uniMarket.js e atualizar os logs para o bloco mais recente a partir do diretório raiz do repositório npm run skim irá procurar por oportunidades skim-able notas de uso os scripts são codificados para usar um nó local na porta 8546 com uma conexão websockets. Se você estiver usando portas diferentes ou infura, altere isso no código. há uma matriz “token blacklist” que inclui tokens que são auto-destruídos, não são realmente contratos ou ERC20 não-padrão totalmente não-padrão. Isso reduz os erros gerais há uma “whitelist” que nomeia corretamente tokens que não seguiram o padrão ERC-20 e retornam um byte32 para seu nome (olhando para você MKR). provavelmente há uma maneira mais inteligente de lidar com este caso limite do que codificação rígida, mas ¯\ (ツ) / ¯ se você tiver problemas para atualizar events.js tente: A) codificar o diretório do caminho em fs.writeFile () em uniMarkets.js B) definir o intervalo de bloco para eth.getLogs mais estreitamente se atualizar por um longo período de tempo skim.js retorna por padrão valores skim-able maiores que $0.01 para que você possa ver alguns resultados. você pode mudar isso alterando a variável minDollarVal em skim.js. Valores skim-able também são retornados quando o coingecko não tem um preço para o token (mas eles têm a maioria) events.js neste repositório está atualizado até o bloco 11057149 e existem 15.230 uniV2.
